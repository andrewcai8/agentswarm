# ==============================================================================
# Longshot Configuration
# ==============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Required variables are marked with [REQUIRED].
# All others have sensible defaults.
# ==============================================================================

# --- LLM Provider Configuration ---

# [REQUIRED] Base URL for an OpenAI-compatible LLM API
# Examples:
#   Anthropic (via proxy):  https://api.anthropic.com/v1
#   OpenAI:                 https://api.openai.com/v1
#   Local (Ollama):         http://localhost:11434/v1
#   Azure OpenAI:           https://YOUR_RESOURCE.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT
LLM_BASE_URL=https://api.openai.com/v1

# [REQUIRED] API key for the LLM provider
LLM_API_KEY=sk-your-api-key-here

# Model to use. Any model accessible via your LLM_BASE_URL works.
# Examples: gpt-5.3, gpt-4o, claude-opus-4-20250514, claude-sonnet-4-20250514
LLM_MODEL=gpt-4o

# (Optional) JSON array of endpoints for load balancing across multiple providers.
# Overrides LLM_BASE_URL and LLM_API_KEY when set.
# Format: [{"baseUrl": "https://...", "apiKey": "sk-..."}, ...]
# LLM_ENDPOINTS=

# Max tokens for LLM responses
LLM_MAX_TOKENS=65536

# Temperature for LLM sampling (0.0 = deterministic, 1.0 = creative)
LLM_TEMPERATURE=0.7

# Timeout for individual LLM requests in milliseconds (unset = no timeout)
# LLM_TIMEOUT_MS=

# How long to wait for LLM endpoint readiness on startup (ms)
LLM_READINESS_TIMEOUT_MS=120000

# --- Git Configuration ---

# [REQUIRED] URL of the target repository to work on
GIT_REPO_URL=https://github.com/your-org/your-repo.git

# [REQUIRED] GitHub Personal Access Token with push access to the target repo
GIT_TOKEN=ghp_your-github-token-here

# Primary branch name
GIT_MAIN_BRANCH=main

# Prefix for worker branches (workers create branches like worker/task-1)
GIT_BRANCH_PREFIX=worker/

# Git identity for commits made by Longshot
GIT_COMMIT_NAME=Longshot Bot
GIT_COMMIT_EMAIL=agent@longshot.bot

# --- Worker Configuration ---

# Maximum number of parallel workers
MAX_WORKERS=50

# Timeout per worker task in seconds
WORKER_TIMEOUT=1800

# Merge strategy: fast-forward | rebase | merge-commit
MERGE_STRATEGY=rebase

# --- Sandbox Configuration (Modal) ---

# Docker image tag for sandboxes
SANDBOX_IMAGE_TAG=latest

# CPU cores per sandbox
SANDBOX_CPU_CORES=4

# Memory per sandbox in MB
SANDBOX_MEMORY_MB=8192

# Idle timeout before sandbox is terminated (seconds)
SANDBOX_IDLE_TIMEOUT=300

# --- Orchestrator ---

# Path to the local clone of the target repository
TARGET_REPO_PATH=./target-repo

# Python executable path
PYTHON_PATH=python3

# Interval for health checks (seconds)
HEALTH_CHECK_INTERVAL=10

# Finalization phase settings
FINALIZATION_ENABLED=true
FINALIZATION_MAX_ATTEMPTS=3
FINALIZATION_SWEEP_TIMEOUT_MS=120000

# --- Logging & Server ---

# Log level: debug | info | warn | error
LOG_LEVEL=info

# MCP server port
PORT=8787
